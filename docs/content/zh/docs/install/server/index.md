---
title: "Server éƒ¨ç½²æ‰‹å†Œ"
linkTitle: "Server"
date: 2021-09-24
weight: 30
draft: true
description: >
  SmartIDE Server æ˜¯é¢å‘å›¢é˜Ÿå’Œä¼ä¸šçš„äº‘åŸç”Ÿå®¹å™¨åŒ–è¿œç¨‹å·¥ä½œåŒºç®¡ç†å¹³å°ï¼Œå¯ä»¥ä¸ºå¼€å‘å›¢é˜Ÿæä¾›ç»Ÿä¸€çš„å¼€å‘æµ‹è¯•èµ„æºç®¡ç†ï¼ŒåŸºäºæµè§ˆå™¨çš„å¼€å‘ç¯å¢ƒè®¿é—®ä»¥åŠå›¢é˜Ÿåä½œèƒ½åŠ›ã€‚SmartIDE Server çš„ å›¢é˜ŸåŸºç¡€ç‰ˆ åŠŸèƒ½æ˜¯å¼€æºè€Œä¸”å…è´¹çš„ï¼Œä»»ä½•äººéƒ½å¯ä»¥æŒ‰ç…§æœ¬æ‰‹å†Œæ‰€æä¾›çš„æ–¹å¼å®Œæˆéƒ¨ç½²å¹¶å…è´¹ä½¿ç”¨ï¼Œæ²¡æœ‰ä½¿ç”¨æœŸé™é™åˆ¶ï¼Œæ²¡æœ‰ç”¨æˆ·æ•°é™åˆ¶ï¼Œä¹Ÿæ²¡æœ‰èµ„æºæ•°é‡é™åˆ¶ã€‚
---

SmartIDE Server æ˜¯é¢å‘å›¢é˜Ÿå’Œä¼ä¸šçš„äº‘åŸç”Ÿå®¹å™¨åŒ–è¿œç¨‹å·¥ä½œåŒºç®¡ç†å¹³å°ï¼Œå¯ä»¥ä¸ºå¼€å‘å›¢é˜Ÿæä¾›ç»Ÿä¸€çš„å¼€å‘æµ‹è¯•èµ„æºç®¡ç†ï¼ŒåŸºäºæµè§ˆå™¨çš„å¼€å‘ç¯å¢ƒè®¿é—®ä»¥åŠå›¢é˜Ÿåä½œèƒ½åŠ›ã€‚SmartIDE Server çš„ å›¢é˜ŸåŸºç¡€ç‰ˆ åŠŸèƒ½æ˜¯å¼€æºè€Œä¸”å…è´¹çš„ï¼Œä»»ä½•äººéƒ½å¯ä»¥æŒ‰ç…§æœ¬æ‰‹å†Œæ‰€æä¾›çš„æ–¹å¼å®Œæˆéƒ¨ç½²å¹¶å…è´¹ä½¿ç”¨ï¼Œæ²¡æœ‰ä½¿ç”¨æœŸé™é™åˆ¶ï¼Œæ²¡æœ‰ç”¨æˆ·æ•°é™åˆ¶ï¼Œä¹Ÿæ²¡æœ‰èµ„æºæ•°é‡é™åˆ¶ã€‚

å¦‚æœæ‚¨æ‰€ä½¿ç”¨çš„æœåŠ¡å™¨ç¯å¢ƒå¯ä»¥è¿æ¥äº’è”ç½‘ï¼Œå¯ä»¥ä½¿ç”¨æˆ‘ä»¬ä»¥ä¸‹æä¾›çš„å…¨è‡ªåŠ¨ä¸€é”®å®‰è£…æ–¹å¼å®Œæˆå®‰è£…éƒ¨ç½²ï¼›å¦‚æœä½ å¤„äºéš”ç¦»ç½‘ç»œï¼ˆæ— æ³•è®¿é—®äº’è”ç½‘ï¼‰ï¼Œæˆ‘ä»¬ä¹Ÿæä¾›å¯ä¾›ä¸‹è½½å¯¼å…¥åˆ°éš”ç¦»ç½‘ç»œä¸­çš„ç¦»çº¿å®‰è£…æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡[æäº¤æŠ€æœ¯æ”¯æŒç”³è¯·](https://leansoftx.feishu.cn/share/base/shrcntjR3kpuAZprfUTSWXar1pK)çš„æ–¹å¼è·å–è¿™äº›èµ„æºã€‚

## æ¶æ„å›¾å’Œç»„ä»¶è¯´æ˜

ä¸‹å›¾å±•ç¤ºäº†SmartIDE Serverç¯å¢ƒçš„æ¶æ„ï¼›æ€»ä½“æ¥è¯´ï¼ŒSmartIDE Server é‡‡ç”¨äº†éå¸¸çµæ´»å¹¶ä¸”å¯æ‰©å±•çš„åˆ†å¸ƒå¼æ¶æ„ï¼Œæ¯ä¸ªæœåŠ¡ç»„ä»¶éƒ½å¯ä»¥è¿›è¡Œç‹¬ç«‹çš„æ¨ªå‘æ‰©å±•ä»¥ä¾¿ç¡®ä¿å¯ä»¥åº”å¯¹ä¸åŒè§„æ¨¡çš„éƒ¨ç½²æ¨¡å¼éœ€æ±‚ã€‚


![ç»„ä»¶å›¾å’Œç»„ä»¶è¯´æ˜](./images/arch-component.svg)

ä¸‹é¢å¯¹ä¸Šå›¾ä¸­å„ä¸ªç»„ä»¶è¿›è¡Œè¯´æ˜ï¼Œä»¥ä¾¿å¯¹æœ¬æ‰‹å†Œä¸­æ‰€æ¶‰åŠçš„å†…å®¹è¿›è¡Œå‡†ç¡®ç†è§£ï¼š
- æ ¸å¿ƒæœåŠ¡ï¼šåŒ…æ‹¬Serveræ‰€æä¾›çš„Webç•Œé¢ï¼ŒAPIæœåŠ¡ï¼Œåå°çš„æ•°æ®æŒä¹…åŒ–ï¼ˆRedis & MySQLï¼‰ï¼Œä»¥åŠæä¾›å¯¹å¤–è®¿é—®çš„åå‘ä»£ç†æœåŠ¡ï¼ˆnginxï¼‰ã€‚å¯¹Serverçš„æ‰€æœ‰è®¿é—®å‡é€šè¿‡åå‘ä»£ç†æœåŠ¡è¿›è¡Œç»Ÿä¸€æ§åˆ¶ï¼Œæ–¹ä¾¿ä¼ä¸šç”¨æˆ·åœ¨éƒ¨ç½²æ—¶ä¸ç°æœ‰ç½‘ç»œæ¶æ„è¿›è¡Œæ•´åˆã€‚
  - å®¹å™¨åŒ–éƒ¨ç½²ï¼šæ ¸å¿ƒæœåŠ¡ä¸­çš„æ‰€æœ‰ç»„ä»¶å…¨éƒ¨é‡‡ç”¨å®¹å™¨åŒ–éƒ¨ç½²æ–¹å¼ï¼Œå¯¹äºå°å‹å›¢é˜Ÿéƒ¨ç½²ç¯å¢ƒï¼Œæˆ‘ä»¬æä¾›docker-composeæ–‡ä»¶å°†æ‰€æœ‰æœåŠ¡éƒ¨ç½²åœ¨ä¸€å°linuxä¸»æœºä¸Šï¼Œå¯¹äºä¸­å¤§å‹å›¢é˜Ÿä¸­çš„éƒ¨ç½²æ¨¡å¼ï¼Œæä¾›å¯¹åº”çš„k8s manifestæ–‡ä»¶ä»¥ä¾¿éƒ¨ç½²åœ¨k8sé›†ç¾¤ä¸­ã€‚
  - è¾…åŠ©ç®¡ç†å·¥å…·ï¼šphpMyAdminæä¾›MySQLæ•°æ®çš„ç®¡ç†ç•Œé¢ï¼ŒPortaineræä¾›dockerå®¹å™¨ç¯å¢ƒçš„ç®¡ç†ï¼Œå¯ä»¥ç”¨äºæœåŠ¡èŠ‚ç‚¹çš„é—®é¢˜å®šä½ï¼Œæ—¥å¿—æŸ¥çœ‹å’Œé‡å¯ç­‰æ“ä½œã€‚å•æœºç‰ˆéƒ¨ç½²æ¨¡å¼ä¸‹é»˜è®¤åœ¨docker-composeä¸­åŒ…å«è¿™ä¸¤ä¸ªå·¥å…·ã€‚
- æ ¸å¿ƒK8SæœåŠ¡ï¼šé‡‡ç”¨åŸºäºtektonæµæ°´çº¿å¼•æ“æä¾›çš„SmartIDEå·¥ä½œåŒºå¼¹æ€§è°ƒåº¦ç»„ä»¶ã€‚è¿œç¨‹å·¥ä½œåŒºæ˜¯SmartIDEä¸­æœ€é‡è¦çš„ç®¡ç†å¯¹è±¡ï¼Œå¯¹äºè¿œç¨‹å·¥ä½œåŒºçš„æ‰€æœ‰è°ƒåº¦ä»»åŠ¡å‡é€šè¿‡tektonæµæ°´çº¿ä»»åŠ¡å®Œæˆã€‚åœ¨è¿™äº›è°ƒåº¦ä»»åŠ¡ä¸­ï¼Œå®é™…æ‰§è¡Œçš„å°±æ˜¯ SmartIDE CLIã€‚CLIä¸­å†…ç½®çš„ mode=server æ¨¡å¼å°±æ˜¯ä¸ºäº†åœ¨è¿™ä¸ªåœºæ™¯ä¸­ä½¿ç”¨è€Œè®¾è®¡çš„ï¼Œmode=server æ¨¡å¼æœ€å¤§åŒ–é‡ç”¨äº† CLI æœ¬èº«çš„èƒ½åŠ›ï¼ŒåŒæ—¶é’ˆå¯¹æµæ°´çº¿è°ƒåº¦ç¯å¢ƒè¿›è¡Œäº†å°‘é‡é€‚é…ã€‚é‡‡ç”¨è¿™ç§æ¶æ„ï¼ŒSmartIDE å¯ä»¥ç®€åŒ–è°ƒåº¦åŠ¨ä½œçš„å¼€å‘è°ƒè¯•å¤æ‚åº¦ï¼ŒåŒæ—¶å°†Serveræ ¸å¿ƒç»„ä»¶ä¸å·¥ä½œåŒºèµ„æºè¿›è¡Œè§£è€¦ï¼Œä¹Ÿå°±æ˜¯è¯´SmartIDE Serverçš„æ ¸å¿ƒæœåŠ¡ä¸ä¼šç›´æ¥è¿æ¥å·¥ä½œåŒºèµ„æºï¼Œè¿™æ ·å°±è®©æ ¸å¿ƒæœåŠ¡å¯ä»¥ä¸“æ³¨äºä¼ä¸šä¸šåŠ¡åœºæ™¯ï¼Œè€Œå°†è¿œç¨‹å·¥ä½œåŒºè°ƒåº¦çš„å·¥ä½œèŒè´£å…¨éƒ¨äº¤ç»™CLIæ¥å®Œæˆã€‚
  - é«˜å¯ç”¨æ€§ï¼štektonæµæ°´çº¿å¼•æ“æœ¬èº«æ˜¯ä¸€ä¸ª k8s CRD å®ç°ï¼Œå…¶å¯ç”¨æ€§æ¥è‡ªäºk8sæœ¬èº«çš„é«˜å¯ç”¨æ€§ã€‚è¿™æ ·çš„è®¾è®¡å¯ä»¥ç¡®ä¿ SmartIDEçš„æ ¸å¿ƒèƒ½åŠ›ç›´æ¥é›†æˆä¼ä¸šäº‘åŸç”Ÿæ¶æ„çš„å¯ç”¨æ€§ã€‚
  - å¼¹æ€§å’Œæ‰©å±•æ€§ï¼šSmartIDEå…·ä½“çš„è°ƒåº¦å·¥ä½œå…¨éƒ¨éƒ½é€šè¿‡æ ¸å¿ƒk8sæœåŠ¡é›†ç¾¤å®Œæˆï¼Œå®Œå…¨ä¸ä¾èµ–serveræ ¸å¿ƒæœåŠ¡çš„ç®—åŠ›å’Œèµ„æºï¼Œè¿™æ ·ä¹Ÿç¡®ä¿äº†åœ¨å¤§è§„æ¨¡å›¢é˜Ÿä½¿ç”¨åœºæ™¯ä¸‹çš„å¼¹æ€§æ‰©å±•ã€‚
- å·¥ä½œåŒºèµ„æºï¼šSmartIDEæ”¯æŒä¸»æœºå’Œk8sä¸¤ç±»èµ„æºï¼Œç®¡ç†å‘˜å¯ä»¥è‡ªè¡Œå°†èµ„æºæ³¨å†Œåˆ° SmartIDE Server å³å¯å…è®¸ç”¨æˆ·ä½¿ç”¨è¿™äº›èµ„æºæ¥è¿è¡Œè¿œç¨‹å·¥ä½œåŒºç¯å¢ƒã€‚SmartIDEå®é™…çš„å·¥ä½œè´Ÿè½½å…¶å®å…¨éƒ¨è¿è¡Œåœ¨è¿™äº›å·¥ä½œåŒºèµ„æºä¸Šï¼Œæ— è®ºæ˜¯ WebIDEï¼Œä»£ç ç¼–è¯‘ï¼Œæµ‹è¯•ä»¥åŠå·¥ä½œæ‰€éœ€è¦çš„ä¸­é—´ä»¶ç¯å¢ƒéƒ½å®Œå…¨ä¸ä¾èµ–serveræ ¸å¿ƒæœåŠ¡ä»¥åŠæ ¸å¿ƒk8sé›†ç¾¤çš„èµ„æºã€‚ä¼ä¸šç®¡ç†å‘˜å¯ä»¥æ ¹æ®éœ€è¦éšæ—¶å¢åŠ æˆ–è€…å‡å°‘æ³¨å†Œç»™SmartIDEçš„å·¥ä½œåŒºèµ„æºä»¥ä¾¿ç¡®ä¿ä¼ä¸šå†…éƒ¨èµ„æºçš„åˆç†åˆ©ç”¨ã€‚
  - ä¸»æœºç±»èµ„æºï¼šå’ŒSmartIDE CLIä¸€æ ·ï¼Œå¼€å‘è€…åªéœ€è¦ä¸€å°å¯ä»¥è¿è¡ŒDockerçš„Linuxä¸»æœºå³å¯å°†SmartIDEè¿œç¨‹å·¥ä½œåŒºéƒ¨ç½²åœ¨ä¸Šé¢ä½¿ç”¨ã€‚å¯¹äºè¿˜æ²¡æœ‰ä½¿ç”¨k8sçš„ä¼ä¸šæ¥è¯´ï¼Œå¯ä»¥å°†é—²ç½®çš„ç‰©ç†æœºï¼Œè™šæ‹Ÿæœºæ³¨å†Œåœ¨SmartIDE Serverä¸Šç»Ÿä¸€ç®¡ç†å¹¶åˆ†é…ç»™å¼€å‘è€…ä½¿ç”¨ã€‚è¿™äº›ä¸»æœºä¹Ÿæ— éœ€ç‰¹åˆ«çš„ç½‘ç»œé…ç½®ï¼Œåªéœ€è¦å¼€é€šSSHæœåŠ¡å³å¯ã€‚
  - K8Sç±»èµ„æºï¼šç®¡ç†å‘˜å¯ä»¥å°†ä¸€ä¸ªæˆ–è€…å¤šä¸ªk8sé›†ç¾¤æ³¨å†Œåˆ°Serverï¼Œå¹¶åˆ†é…ç»™å¼€å‘è€…ä½¿ç”¨ã€‚SmartIDE Serverä¼šè‡ªåŠ¨å®Œæˆå¯¹k8sé›†ç¾¤çš„å¿…è¦åˆå§‹åŒ–æ“ä½œï¼Œå¹¶åˆ©ç”¨å‘½åç©ºé—´ï¼ˆNamespaceï¼‰éš”ç¦»ä¸åŒå¼€å‘è€…çš„è¿œç¨‹å·¥ä½œåŒºç¯å¢ƒï¼ŒåŒ…æ‹¬èµ„æºç”¨é‡é™åˆ¶ã€‚

## éƒ¨ç½²æ¨¡å¼
SmartIDE Server æä¾›ä¸‰ç§ä¸åŒçš„éƒ¨ç½²æ¶æ„ä»¥ä¾¿é€‚åº”ä¸åŒè§„æ¨¡çš„å›¢é˜Ÿä½¿ç”¨
- å•æœºç‰ˆå®‰è£…ï¼šåªéœ€è¦ä¸€å°linuxæœåŠ¡å™¨å°±å¯ä»¥å®Œæˆæ•´ä¸ªServerç¯å¢ƒçš„å®‰è£…å’Œéƒ¨ç½²ï¼ŒåŒ…æ‹¬æ ¸å¿ƒæœåŠ¡å’Œæ ¸å¿ƒK8Sé›†ç¾¤å‡å¯ä»¥åœ¨ä¸€å°ä¸»æœºä¸Šå®Œæˆéƒ¨ç½²ã€‚åœ¨è¿™ä¸ªéƒ¨ç½²æ¨¡å¼ä¸‹ï¼Œæ ¸å¿ƒk8sé›†ç¾¤ä¼šä½¿ç”¨ä¸€ä¸ªå•èŠ‚ç‚¹çš„minikubeæ¥æä¾›k8sçš„è°ƒåº¦èƒ½åŠ›ã€‚å¯¹äºå°å‹å›¢é˜Ÿæ¥è¯´ï¼Œè¿™ç§éƒ¨ç½²æ¨¡å¼éå¸¸ç®€å•è€Œä¸”èµ„æºæ¶ˆè€—å¾ˆä½ã€‚
- å¤šæœºç‰ˆå®‰è£…ï¼šå¯ä»¥å°†æ ¸å¿ƒæœåŠ¡å’Œk8sæœåŠ¡åˆ†åˆ«éƒ¨ç½²åœ¨2å°æˆ–è€…å¤šå°ä¸»æœºä¸­ï¼Œè¿™ç§éƒ¨ç½²æ¨¡å¼é€‚åˆä¸­ç­‰è§„æ¨¡çš„å›¢é˜Ÿï¼Œæˆ–è€…æ²¡æœ‰k8såŸºç¡€ç¯å¢ƒçš„ä¼ä¸šã€‚æ­é…ä¸»æœºç±»å·¥ä½œåŒºèµ„æºï¼Œå¯ä»¥åœ¨å®Œå…¨æ²¡æœ‰k8sç¯å¢ƒä¸‹ä½¿ç”¨SmartIDE Serverã€‚
- é›†ç¾¤å®‰è£…ï¼šå¦‚æœä¼ä¸šå·²ç»å…·å¤‡äº†ç°æœ‰çš„k8sç¯å¢ƒï¼Œé‚£ä¹ˆå¯ä»¥å°†SmartIDE Serverçš„å…¨éƒ¨ç»„ä»¶éƒ½éƒ¨ç½²åˆ°k8sé›†ç¾¤ä¸­ä»¥æä¾›é«˜å¯ç”¨ï¼Œå¼¹æ€§å’Œå¯æ‰©å±•æ€§ï¼Œæ»¡è¶³ä¸­åˆ°å¤§å‹å›¢é˜Ÿçš„æ—¥å¸¸ä½¿ç”¨ï¼›åŒæ—¶åœ¨éœ€è¦æ‰©å±•ç”¨é‡çš„æ—¶å€™ä¸´æ—¶æ¥å…¥ä¸»æœºæˆ–è€…K8Sé›†ç¾¤æ¥æ»¡è¶³éœ€æ±‚ã€‚

## å•æœºç‰ˆå®‰è£…æ“ä½œ
ä»¥ä¸‹æ“ä½œè¿‡ç¨‹é’ˆå¯¹å•æœºç‰ˆç¯å¢ƒå®‰è£…è¿›è¡Œæè¿°ï¼Œå¦‚æœéœ€è¦è¿›è¡Œå¤šæœºæˆ–è€…é›†ç¾¤å®‰è£…éƒ¨ç½²ï¼Œè¯· [æäº¤æŠ€æœ¯æ”¯æŒç”³è¯·](https://leansoftx.feishu.cn/share/base/shrcntjR3kpuAZprfUTSWXar1pK) ã€‚

### ç¯å¢ƒè¦æ±‚
å•æœºç‰ˆç¯å¢ƒå¯ä»¥æ»¡è¶³10-50äººå›¢é˜Ÿæ—¥å¸¸ä½¿ç”¨éœ€æ±‚ï¼Œæ ¹æ®å›¢é˜Ÿè§„æ¨¡æƒ…å†µï¼Œè¯·é€‰æ‹©ä»¥ä¸‹ç¯å¢ƒæœ€å°åŒ–æˆ–è€…å»ºè®®é…ç½®ã€‚

| çº§åˆ«     | æœ€å¤§äººæ•° | Linuxå‘è¡Œç‰ˆ      | é…ç½®                      |
| -------- | -------- | ---------------- | ------------------------- |
| æœ€å°é…ç½® | 10       | Ubuntu 20.04 LTS | 4æ ¸CPUï¼Œ8Gå†…å­˜ï¼Œ100Gç¡¬ç›˜  |
| å»ºè®®é…ç½® | 50       | Ubuntu 20.04 LTS | 8æ ¸CPUï¼Œ64Gå†…å­˜ï¼Œ500Gç¡¬ç›˜ |

*å¤‡æ³¨ï¼š*

- *ä»¥ä¸Šäººæ•°é™åˆ¶ä»…ä»£è¡¨ä¸€ä¸ªä¼°è®¡å€¼ï¼Œæ ¹æ®å®é™…ä½¿ç”¨åœºæ™¯å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼›*
- *ä»¥ä¸Šç¯å¢ƒä»…ä»£è¡¨æ ¸å¿ƒæœåŠ¡å’Œæ ¸å¿ƒK8Sï¼ˆé‡‡ç”¨minikubeå•èŠ‚ç‚¹æ¨¡å¼ï¼‰çš„æœåŠ¡å™¨èŠ‚ç‚¹éœ€æ±‚ï¼Œå·¥ä½œåŒºèµ„æºï¼ˆä¸»æœºæˆ–è€…K8Sï¼‰éœ€è¦å¦å¤–å‡†å¤‡ï¼›*
- *è™½ç„¶å¯ä»¥å°†è¿™ä¸ªæœåŠ¡å™¨ä¹Ÿæ³¨å†Œåˆ°Serverçš„å·¥ä½œåŒºèµ„æºåˆ—è¡¨ä¸­ä½¿ç”¨ï¼Œä½†æ˜¯éå¸¸ä¸å»ºè®®è¿™æ ·åšï¼Œå› ä¸ºå·¥ä½œåŒºè°ƒåº¦ä»»åŠ¡ä¼šå¯¹èŠ‚ç‚¹è¿›è¡Œæ–‡ä»¶æ“ä½œå’Œå„ç§å¤æ‚æ§åˆ¶ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­å¾ˆå¯èƒ½å½±å“æ ¸å¿ƒæœåŠ¡çš„è¿è¡Œï¼›*
- *è¯·ç¡®ä¿ä½¿ç”¨å¹²å‡€çš„æ“ä½œæä¾›ç¯å¢ƒï¼Œå¦‚æœä¸»æœºä¸Šå·²ç»å®‰è£…æˆ–è€…è¿è¡Œå…¶ä»–åº”ç”¨å¯èƒ½ä¼šåœ¨æœ¬æ‰‹å†Œæ“ä½œè¿‡ç¨‹ä¸­è¢«æŸåæˆ–è€…å½±å“æœ¬æ‰‹å†Œçš„æ“ä½œç»“æœã€‚*
- *å½“å‰åªæä¾›Ubuntuç³»ç»Ÿçš„ä¸€é”®å®‰è£…è„šæœ¬ï¼Œå…¶ä»–å‘è¡Œç‰ˆçš„è„šæœ¬ä¼šé™†ç»­æä¾›ã€‚*

### è´¦å·å’Œæƒé™è¦æ±‚
ä¸æ”¯æŒä½¿ç”¨rootè´¦å·è¿›è¡Œæ“ä½œï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ–¹å¼åˆ›å»ºéroot+å…å¯†ç sudoè´¦å·è¿›è¡Œæ“ä½œã€‚å¦‚æœå½“å‰åªæœ‰rootè´¦å·ï¼Œè¯·ä½¿ç”¨rootè´¦å·SSHç™»å½•åˆ°æœåŠ¡å™¨ä»¥åæ‰§è¡Œä»¥ä¸‹æ“ä½œã€‚
```
## æ–°å¢ç”¨æˆ·smartide,å¹¶è®¾ç½®sudoæƒé™
sudo useradd smartide
sudo passwd smartide

## ç¼–è¾‘ sudoers æ–‡ä»¶é…ç½®å…å¯†ç sudoæ“ä½œ
sudo vim /etc/sudoers
## åœ¨ Allow root to run any commands anywhere çš„rootä¸‹æ–¹è®¾ç½®sudoå…å¯†æƒé™
smartide   ALL=(ALL) NOPASSWD: ALL
```
å®Œæˆä»¥ä¸Šæ“ä½œåç”¨æ‰€åˆ›å»ºçš„è´¦å·é‡æ–°SSHç™»å½•ç³»ç»Ÿï¼Œæ¯”å¦‚ä»¥ä¸Šä½¿ç”¨çš„æ˜¯ smartide è´¦å·ï¼Œé‚£ä¹ˆä½ çš„ç™»å½•æŒ‡ä»¤æ˜¯ï¼š
```
ssh smartide@<server ip address> -p <server SSH port>
```
### ç½‘ç»œå’Œé˜²ç«å¢™è¦æ±‚
ä¸ºäº†ç¡®ä¿å¯ä»¥æ­£å¸¸è®¿é—®SmartIDE Severçš„ç›¸å…³æœåŠ¡ï¼Œè¯·ç¡®ä¿ä»¥ä¸‹ç«¯å£å·²ç»åœ¨ç½‘ç»œé˜²ç«å¢™æˆ–è€…ç½‘ç»œç­–ç•¥ä¸­æ‰“é€šã€‚

| ç«¯å£         | æœåŠ¡           | è¯´æ˜                                                         |
| ------------ | -------------- | ------------------------------------------------------------ |
| 8080         | WEBç•Œé¢        | Serverçš„ä¸»æœåŠ¡ç«¯å£ï¼Œç”¨æˆ·é€šè¿‡è¿™ä¸ªç«¯å£è®¿é—®SmartIDE Severçš„Webç•Œé¢ |
| 8090ï¼ˆå¯é€‰ï¼‰ | phpMyAdminç•Œé¢ | MySQLæ•°æ®åº“çš„Webç®¡ç†ç•Œé¢ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å¼€æ”¾                   |
| 9000ï¼ˆå¯é€‰ï¼‰ | Portainer ç•Œé¢ | Dockerç¯å¢ƒçš„Webç®¡ç†ç•Œé¢ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å¼€æ”¾                    |
| 9097ï¼ˆå¯é€‰ï¼‰ | Tektonä»ªè¡¨ç›˜   | Tektonæµæ°´çº¿å¼•æ“çš„ä»ªè¡¨ç›˜Webç•Œé¢ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å¼€æ”¾<br>å¤‡æ³¨ï¼šæ­¤æ— æœåŠ¡æ— èº«ä»½éªŒè¯ï¼Œè¯·è°¨æ…å¼€æ”¾æ­¤ç«¯å£ |

### ä¸€é”®å®‰è£…éƒ¨ç½²è„šæœ¬
è¯·ç¡®ä¿æ‰§è¡Œä»¥ä¸‹è„šæœ¬ä¹‹å‰å·²ç»å®Œæˆäº†ç¯å¢ƒè¦æ±‚ã€è´¦å·è¦æ±‚ã€ç½‘ç»œè¦æ±‚çš„æ£€æŸ¥ï¼›å¹¶ä¸”ï¼Œè¯·ç¡®ä¿æ‰§è¡Œè„šæœ¬çš„ä¸»æœºç¯å¢ƒä¸äº’è”ç½‘ä¿æŒç•…é€šã€‚

åœ¨ä»¥ä¸‹è„šæœ¬æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šé¢‘ç¹çš„é€šè¿‡ç½‘ç»œä¸‹è½½æ–‡ä»¶æˆ–è€…æ‹‰å–å®¹å™¨é•œåƒï¼Œå¦‚æœå› ä¸ºç½‘ç»œé—®é¢˜é€ æˆå®‰è£…ç»ˆç«¯ï¼Œè¯·ä»æ–°æ‰§è¡Œè„šæœ¬ã€‚
ä¸ºäº†é€‚åº”å›½å†…/å›½é™…ç½‘ç»œçš„ä¸åŒç‰¹æ€§ï¼Œæˆ‘ä»¬æä¾›äº†2ä¸ªä¸åŒçš„è„šæœ¬åˆ†åˆ«ä½¿ç”¨å›½å†…/å›½å¤–çš„æ–‡ä»¶å’Œé•œåƒæºè·å–å®‰è£…ä»‹è´¨ï¼Œè¯·æ ¹æ®ä½ çš„æœåŠ¡å™¨æ‰€å¤„çš„ç½‘ç»œç¯å¢ƒè‡ªè¡Œå†³å®šä½¿ç”¨å“ªä¸ªè„šæœ¬å®Œæˆå®‰è£…ã€‚
å›½å†…ç½‘ç»œä¸€é”®å®‰è£…

```bash
curl -LO https://gitee.com/smartide/SmartIDE/raw/main/server/deployment/deployment_cn.sh -o deployment_cn.sh&& bash deployment_cn.sh
```
å›½é™…ç½‘ç»œä¸€é”®å®‰è£…
```bash
curl -s https://gitee.com/smartide/SmartIDE/raw/main/server/deployment/deployment.sh -o deployment.sh&& bash deployment.sh
```
å®‰è£…æ­¥éª¤ä¸­ï¼Œéœ€è¦è¾“å…¥SmartIDE Serverå¯¹å¤–æœåŠ¡çš„IPåœ°å€ï¼Œåœ¨è¿™é‡Œè¾“å…¥æœ¬åœ°å¯¹å¤–æœåŠ¡çš„IPï¼š

```
è¯·è¾“å…¥æœ¬æœºå¯¹å¤–æœåŠ¡çš„IPåœ°å€ï¼šXX.XX.XX.XX
```

å®‰è£…è¿‡ç¨‹ä¸€èˆ¬éœ€è¦æŒç»­10åˆ†é’Ÿå·¦å³ï¼Œä»¥ä¸‹æ˜¯å®‰è£…çš„å®Œæ•´æ—¥å¿—

```bash
localadmin@Private-Online-Deploy:~$ curl -LO https://gitee.com/smartide/SmartIDE/raw/main/server/deployment/deployment_cn.sh -o deployment_cn.sh&& bash deployment_cn.sh
SmartIDE Server Deployment Start...
è¯·è¾“å…¥æœ¬æœºå¯¹å¤–æœåŠ¡çš„IPåœ°å€ï¼š20.2.72.212
SmartIDE Server Deployment : 1.Basic Component
SmartIDE Server Deployment : 1.1 docker and docker-compose
...
SmartIDE Server Deployment : 1.2 Git
SmartIDE Server Deployment : 1.3 Kubectl
SmartIDE Server Deployment : 1.Basic Component Installed Successfully.
SmartIDE Server Deployment : 2.MiniKube
SmartIDE Server Deployment : 2.1 Minikube Install
SmartIDE Server Deployment : 2.2 Build Minikube Env
ğŸ”¥  Deleting "minikube" in docker ...
ğŸ”¥  Deleting container "minikube" ...
ğŸ”¥  Removing /home/localadmin/.minikube/machines/minikube ...
ğŸ’€  Removed all traces of the "minikube" cluster.
ğŸ˜„  minikube v1.24.0 on Ubuntu 20.04
âœ¨  Using the docker driver based on user configuration
â—  Your cgroup does not allow setting memory.
    â–ª More information: https://docs.docker.com/engine/install/linux-postinstall/#your-kernel-does-not-support-cgroup-swap-limit-capabilities
âœ…  Using image repository registry.cn-hangzhou.aliyuncs.com/google_containers
ğŸ‘  Starting control plane node minikube in cluster minikube
ğŸšœ  Pulling base image ...
ğŸ”¥  Creating docker container (CPUs=2, Memory=4096MB) ...
ğŸ³  Preparing Kubernetes v1.22.3 on Docker 20.10.8 ...
    â–ª Generating certificates and keys ...
    â–ª Booting up control plane ...
    â–ª Configuring RBAC rules ...
ğŸ”  Verifying Kubernetes components...
    â–ª Using image registry.cn-hangzhou.aliyuncs.com/google_containers/storage-provisioner:v5
ğŸŒŸ  Enabled addons: storage-provisioner, default-storageclass
ğŸ„  Done! kubectl is now configured to use "minikube" cluster and "default" namespace by default
    â–ª Using image registry.cn-hangzhou.aliyuncs.com/google_containers/nginx-ingress-controller:v1.0.4
    â–ª Using image registry.cn-hangzhou.aliyuncs.com/google_containers/kube-webhook-certgen:v1.1.1
    â–ª Using image registry.cn-hangzhou.aliyuncs.com/google_containers/kube-webhook-certgen:v1.1.1
ğŸ”  Verifying ingress addon...
ğŸŒŸ  The 'ingress' addon is enabled
SmartIDE Server Deployment : 3.Tekton Pipeline
SmartIDE Server Deployment : 3.1 Kubectl Apply Tekton Pipeline And DashBoard
...
SmartIDE Server Deployment : 3.2 Kubectl Apply Tekton Trigger
...
SmartIDE Server Deployment : 3.3 Kubectl Apply Tekton SmartIDE Pipeline Configrate
...
SmartIDE Server Deployment : 3.Tekton Pipeline Installed Successfully.
SmartIDE Server Deployment : 4.SmartIDE Server
...
Network smartide-server-network is external, skipping
Creating gva-portainer ... done
Creating gva-mysql     ... done
Creating gva-myadmin   ... done
Creating gva-redis     ... done
Creating gva-server    ... done
Creating gva-web       ... done
SmartIDE Server Deployment : 4.SmartIDE Server Installed Successfully.
SmartIDE Server Deployment : 5.Build SmartIDE Server Network Connection With Minikube.
SmartIDE Server Deployment : 5.Build SmartIDE Server Network Connection With Minikube Successfully.
SmartIDE Server æœåŠ¡åœ°å€ï¼šhttp://20.2.72.212:8080
SmartIDE Server Deployment Successfullyï¼
```
è¯·ç¡®ä¿ä½ çš„æ—¥å¿—æœ«å°¾å‡ºç°  SmartIDE Server Deployment Successfullyï¼çš„å­—æ ·å³è¡¨ç¤ºå®‰è£…å·²ç»é¡ºåˆ©å®Œæˆã€‚

å¦‚æœä¸­é€”å‡ºç°æŠ¥é”™çš„æƒ…å†µï¼Œå¯ä»¥æäº¤ Issue ä¸æˆ‘ä»¬è”ç³»ã€‚

### è®¿é—®ç¯å¢ƒ
å®Œæˆä»¥ä¸Šå®‰è£…æ­¥éª¤åï¼Œå°±å¯ä»¥é€šè¿‡ä»¥ä¸‹è®¿é—®åœ°å€ï¼Œè®¿é—®éƒ¨ç½²å¥½çš„Serveräº†ï¼š
- ä¸»æœåŠ¡ http://{deploment host ip}:8080
- MySQLç®¡ç†ç•Œé¢ï¼ˆå¯é€‰ï¼‰http://{deploment host ip}:8090
- Dockerç¯å¢ƒç®¡ç†ç•Œé¢ï¼ˆå¯é€‰ï¼‰ http://{deploment host ip}:9000
- Tektonä»ªè¡¨ç›˜ï¼ˆå¯é€‰ï¼‰ http://{deploment host ip}:9097
æ³¨ï¼šè‹¥éœ€ä½¿ç”¨Tektonä»ªè¡¨ç›˜ï¼ˆå¯é€‰ï¼‰æŸ¥çœ‹æµæ°´çº¿æ‰§è¡Œæƒ…å†µï¼Œéœ€åœ¨ä¸»æœºæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåè®¿é—®Tektonä»ªè¡¨ç›˜ï¼Œè¿™ä¸ªè„šæœ¬ä¼šå¯ç”¨9097ç«¯å£ï¼Œè¯·åŒæ—¶ç¡®ä¿9097ç«¯å£å·²ç»åœ¨ç½‘ç»œä¸­æ‰“é€šã€‚
```bash
kubectl --namespace tekton-pipelines port-forward svc/tekton-dashboard 9097:9097 --address 0.0.0.0 &
```
### åˆå§‹è´¦å·å’Œå¯†ç ä¿®æ”¹
åˆå§‹è¶…çº§ç®¡ç†å‘˜ç”¨æˆ·åå¯†ç 
- ç”¨æˆ·åï¼šsuperadmin 
- é»˜è®¤å¯†ç ï¼šSmartIDE@123

å¼ºçƒˆå»ºè®®ç«‹å³ä¿®æ”¹ä»¥ä¸Šè´¦å·çš„å¯†ç ï¼Œæ­¤è´¦å·ï¼ˆsuperadminï¼‰ä¸ºç³»ç»Ÿè¶…çº§ç®¡ç†å‘˜è´¦å·ï¼Œå¯ä»¥åœ¨ç³»ç»Ÿä¸­è¿›è¡Œä»»ä½•æ“ä½œï¼ˆåŒ…æ‹¬ä¸€äº›å¯èƒ½æŸåSmartIDEç°æœ‰åŠŸèƒ½çš„æ“ä½œï¼‰ã€‚å› æ­¤å»ºè®®å®‰è£…å®Œæˆåç«‹å³ä¿®æ”¹æ­¤è´¦å·çš„å¯†ç ã€‚

ä¿®æ”¹å¯†ç æ“ä½œï¼šç‚¹å‡»Serverç‰ˆå³ä¸Šè§’ã€ä¸ªäººä¿¡æ¯ã€‘ï¼Œå¹¶ä¸”ç‚¹å‡»ã€ä¿®æ”¹å¯†ç ã€‘æ“ä½œå³å¯ã€‚

![ä¸ªäººä¿¡æ¯](./images/personinfo.png)
![ä¿®æ”¹å¯†ç ](./images/changepassword.png)

è¯·æ³¨æ„ï¼Œsuperadminè´¦å·è¿˜ç”¨äºtektonæµæ°´çº¿çš„è°ƒåº¦ï¼Œå› æ­¤åœ¨ä¿®æ”¹å¯†ç åè¿˜éœ€è¦æ›´æ–° serveré…ç½®æ–‡ä»¶ä¸­çš„ token ä¿¡æ¯ã€‚ä½ å¯ä»¥é€šè¿‡ SmartIDE CLI æ‰§è¡Œ se login æŒ‡ä»¤å¹¶è¿æ¥åˆ°å½“å‰ server çš„ä¸»æœåŠ¡åœ°å€ä¸Šå¹¶ä½¿ç”¨superadminè´¦å·ç™»å½•ï¼Œæ­¤æ—¶æ‰“å¼€ .ide/.ide.config æ–‡ä»¶å¯ä»¥è·å–æ–°tokenä¿¡æ¯ã€‚

![æŸ¥çœ‹superadminçš„token](./images/viewtoken.png)

å°†æ­¤tokenä¸­å†…å®¹æ›´æ–°åˆ° server-server å®¹å™¨ä¸­çš„é…ç½®æ–‡ä»¶é‡Œé¢ï¼š

- è¿›å…¥åˆ°å®‰è£…ç›®å½•çš„smartide-installç›®å½•ï¼Œ```vi config.docker.yaml```

![ä¿®æ”¹token](./images/changetoken.png)

- ä¿®æ”¹å®Œæ¯•åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œé‡å¯å¯åŠ¨gva-serverå®¹å™¨å³å¯ã€‚

```bash
docker restart gva-server
```

### éªŒè¯Serverå·¥ä½œæƒ…å†µ
å¯ä»¥å‚è€ƒ [Serverå¿«é€Ÿå¼€å§‹](zh/docs/quickstart/server) æ–‡æ¡£å®Œæˆä¸»æœºèµ„æºæ³¨å†Œå’Œå·¥ä½œåŒºåˆ›å»ºæ“ä½œï¼Œå³å¯éªŒè¯å½“å‰SmartIDE Serverçš„åŠŸèƒ½å·¥ä½œæ­£å¸¸ã€‚

## æŠ€æœ¯æ”¯æŒ
å¦‚æœæ‚¨åœ¨ä»¥ä¸Šå®‰è£…è¿‡ç¨‹æˆ–è€…æ—¥å¸¸ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·é€šè¿‡æäº¤ Issue çš„æ–¹å¼ä¸æˆ‘ä»¬å–å¾—è”ç³»ã€‚

ä¹Ÿå¯ä»¥åŠ å…¥æˆ‘ä»¬çš„ SmartIDE æ—©é¸Ÿç¾¤è·å–ç¬¬ä¸€æ‰‹çš„äº§å“èµ„æ–™å’ŒæŠ€æœ¯æ”¯æŒã€‚
å¯¹äºéš”ç¦»ç½‘ç»œæˆ–è€…ä¸­å¤§å‹éƒ¨ç½²æ¨¡å¼çš„æŠ€æœ¯æ”¯æŒï¼Œè¯· [æäº¤æŠ€æœ¯æ”¯æŒç”³è¯·](https://leansoftx.feishu.cn/share/base/shrcntjR3kpuAZprfUTSWXar1pK) ï¼Œæˆ‘ä»¬ä¼šå°½å¿«ä¸æ‚¨å–å¾—è”ç³»ã€‚


## å‚è€ƒèµ„æ–™
- Docker & Docker-Compose å®˜æ–¹å®‰è£…æ‰‹å†Œ(https://docs.docker.com/get-docker/)
- [CLI å®‰è£…è¯´æ˜](/zh/docs/install/cli/) 
- [Docker & Docker-Compose å®‰è£…æ‰‹å†Œ (LinuxæœåŠ¡å™¨)](/zh/docs/install/docker/linux/)
- Tekton æµæ°´çº¿å¼•æ“å®˜ç½‘(https://tekton.dev/)
- Minikube å®˜ç½‘(https://minikube.sigs.k8s.io/docs/)
